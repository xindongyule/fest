<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小南资源库 - 后台管理</title>
    <link rel="stylesheet" href="admin.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- 安全验证脚本 -->
    <script>
        // 立即执行的安全验证
        (function() {
            'use strict';
            
            // 添加调试标志，防止无限重定向
            const DEBUG_MODE = true;
            const redirectAttempts = parseInt(sessionStorage.getItem('adminRedirectAttempts') || '0');
            
            if (redirectAttempts > 3) {
                console.error('🚨 检测到重定向循环，停止安全验证');
                sessionStorage.removeItem('adminRedirectAttempts');
                document.getElementById('adminBody').style.display = 'block';
                return;
            }
            
            // 检查登录状态
            function checkLoginStatus() {
                try {
                    const loginTime = localStorage.getItem('adminLoginTime');
                    const loginToken = localStorage.getItem('adminToken');
                    const sessionTimeout = parseInt(localStorage.getItem('sessionTimeout') || '3600') * 1000; // 默认1小时
                    
                    if (DEBUG_MODE) {
                        console.log('🔐 安全检查:', {
                            loginTime: !!loginTime,
                            loginToken: !!loginToken,
                            sessionTimeout
                        });
                    }
                    
                    if (!loginTime || !loginToken) {
                        redirectToLogin('未登录');
                        return false;
                    }
                    
                    const currentTime = new Date().getTime();
                    const timeDiff = currentTime - parseInt(loginTime);
                    
                    if (timeDiff > sessionTimeout) {
                        // 会话超时
                        clearAuthData();
                        redirectToLogin('会话已过期，请重新登录');
                        return false;
                    }
                    
                    // 验证token格式
                    if (!isValidToken(loginToken)) {
                        clearAuthData();
                        redirectToLogin('登录信息无效');
                        return false;
                    }
                    
                    return true;
                } catch (error) {
                    console.error('安全检查失败:', error);
                    return false;
                }
            }
            
            // 验证token格式
            function isValidToken(token) {
                try {
                    const parts = token.split('.');
                    if (parts.length !== 3) return false;
                    
                    const payload = JSON.parse(atob(parts[1]));
                    return payload.user === 'admin' && payload.timestamp && payload.exp;
                } catch (e) {
                    return false;
                }
            }
            
            // 清理认证数据
            function clearAuthData() {
                localStorage.removeItem('adminLoginTime');
                localStorage.removeItem('adminToken');
                localStorage.removeItem('lastActivity');
            }
            
            // 重定向到登录页面
            function redirectToLogin(message = '') {
                sessionStorage.setItem('adminRedirectAttempts', (redirectAttempts + 1).toString());
                
                if (message && DEBUG_MODE) {
                    console.log('🔄 重定向原因:', message);
                }
                
                if (message) {
                    sessionStorage.setItem('loginMessage', message);
                }
                
                // 短暂延迟以避免立即重定向
                setTimeout(() => {
                    window.location.replace('login.html');
                }, 100);
            }
            
            // 防止页面被嵌入到iframe中
            if (window.top !== window.self) {
                redirectToLogin('不允许在框架中打开');
                return;
            }
            
            // 防止直接访问
            if (!checkLoginStatus()) {
                return;
            }
            
            // 更新最后活动时间
            localStorage.setItem('lastActivity', new Date().getTime().toString());
            
            // 清理重定向计数
            sessionStorage.removeItem('adminRedirectAttempts');
            
            if (DEBUG_MODE) {
                console.log('✅ 安全验证通过，显示管理界面');
            }
            
        })();
    </script>
</head>
<body style="display: none;" id="adminBody">
    <div class="admin-container">
        <!-- 侧边栏 -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-cog"></i>
                    <span>后台管理</span>
                </div>
            </div>
            
            <ul class="sidebar-menu">
                <li class="menu-item active" data-tab="profile">
                    <i class="fas fa-user"></i>
                    <span>个人信息</span>
                </li>
                <li class="menu-item" data-tab="stats">
                    <i class="fas fa-chart-bar"></i>
                    <span>统计数据</span>
                </li>
                <li class="menu-item" data-tab="links">
                    <i class="fas fa-link"></i>
                    <span>链接管理</span>
                </li>
                <li class="menu-item" data-tab="qrcode">
                    <i class="fas fa-qrcode"></i>
                    <span>二维码设置</span>
                </li>
                <li class="menu-item" data-tab="analytics">
                    <i class="fas fa-chart-line"></i>
                    <span>运行监控</span>
                </li>
                <li class="menu-item" data-tab="appearance">
                    <i class="fas fa-palette"></i>
                    <span>外观设置</span>
                </li>
                <li class="menu-item" data-tab="export">
                    <i class="fas fa-download"></i>
                    <span>数据管理</span>
                </li>
                <li class="menu-item" data-tab="security">
                    <i class="fas fa-shield-alt"></i>
                    <span>安全设置</span>
                </li>
            </ul>
            
            <div class="sidebar-footer">
                <a href="index.html" class="preview-btn">
                    <i class="fas fa-eye"></i>
                    <span>预览网站</span>
                </a>
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>退出登录</span>
                </button>
            </div>
        </nav>

        <!-- 主内容区 -->
        <main class="main-content">
            <!-- 顶部导航 -->
            <header class="top-header">
                <div class="header-left">
                    <button class="mobile-menu-toggle" id="mobileMenuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="header-title">
                        <h1 class="page-title">个人信息管理</h1>
                        <p class="page-subtitle">管理您的个人资料和展示信息</p>
                    </div>
                </div>
                <div class="header-right">
                    <button class="btn btn-primary" id="saveAllBtn">
                        <i class="fas fa-save"></i>
                        保存所有更改
                    </button>
                </div>
            </header>

            <!-- 个人信息设置 -->
            <section class="content-section active" id="profile-section">
                <div class="section-header">
                    <h2>个人信息设置</h2>
                    <p>管理您的基本信息和头像</p>
                </div>
                
                <div class="profile-layout">
                    <!-- 个人信息表单区域 -->
                    <div class="profile-info-section">
                        <div class="form-group">
                            <label for="profileName">用户名</label>
                            <input type="text" id="profileName" placeholder="请输入用户名">
                            <small>显示在主页顶部的个人名称</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="profileBio">个人简介</label>
                            <textarea id="profileBio" rows="4" placeholder="请输入个人简介"></textarea>
                            <small>显示在用户名下方的简短介绍</small>
                        </div>
                    </div>
                    
                    <!-- 头像设置区域 -->
                    <div class="avatar-section">
                        <div class="form-group avatar-group">
                            <label>头像设置</label>
                            <div class="avatar-upload">
                                <div class="avatar-preview">
                                    <img id="avatarPreview" src="Tx.jpg" alt="头像预览">
                                    <div class="avatar-overlay">
                                        <i class="fas fa-camera"></i>
                                    </div>
                                </div>
                                <div class="upload-controls">
                                    <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('avatarInput').click()">
                                        <i class="fas fa-upload"></i>
                                        上传头像
                                    </button>
                                    <small>支持 JPG、PNG 格式，建议尺寸 400x400</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 统计数据设置 -->
            <section class="content-section" id="stats-section">
                <div class="section-header">
                    <h2>统计数据设置</h2>
                    <p>自定义显示的统计信息，让您的数据更加生动</p>
                </div>
                
                <!-- 快速统计总览 -->
                <div class="stats-overview">
                    <div class="overview-stat">
                        <div class="overview-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="overview-content">
                            <span class="overview-number" id="totalViewsDisplay">2,547</span>
                            <span class="overview-label">总浏览量</span>
                        </div>
                    </div>
                    <div class="overview-stat">
                        <div class="overview-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="overview-content">
                            <span class="overview-number" id="totalLikesDisplay">1,234</span>
                            <span class="overview-label">总获赞数</span>
                        </div>
                    </div>
                    <div class="overview-stat">
                        <div class="overview-icon">
                            <i class="fas fa-calendar"></i>
                        </div>
                        <div class="overview-content">
                            <span class="overview-number" id="daysOnlineDisplay">127</span>
                            <span class="overview-label">运行天数</span>
                        </div>
                    </div>
                </div>
                
                <!-- 统计卡片配置区域 -->
                <div class="stats-config-section">
                    <h3 class="config-title">
                        <i class="fas fa-cogs"></i>
                        统计卡片配置
                    </h3>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <label for="followersCount">关注者数量</label>
                                <input type="text" id="followersCount" placeholder="1.5K">
                                <small>💡 显示关注者数量，可使用 K、M 等单位缩写</small>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-mouse-pointer"></i>
                            </div>
                            <div class="stat-content">
                                <label for="clicksCount">点击量</label>
                                <input type="number" id="clicksCount" placeholder="856">
                                <small>⚡ 网站总访问次数，可手动调整或自动累加</small>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-link"></i>
                            </div>
                            <div class="stat-content">
                                <label for="linksCount">链接数量</label>
                                <input type="number" id="linksCount" placeholder="3" readonly>
                                <small>🔗 根据实际链接数量自动计算（只读）</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 高级设置区域 -->
                <div class="advanced-stats-section">
                    <h3 class="config-title">
                        <i class="fas fa-magic"></i>
                        高级设置
                    </h3>
                    
                    <div class="advanced-options-grid">
                        <div class="option-card">
                            <div class="option-header">
                                <i class="fas fa-play"></i>
                                <span>数字动画效果</span>
                            </div>
                            <div class="option-body">
                                <label class="switch-option">
                                    <input type="checkbox" id="enableStatsAnimation">
                                    <span class="switch-slider"></span>
                                </label>
                                <small>开启后统计数字将有滚动动画效果</small>
                            </div>
                        </div>
                        
                        <div class="option-card">
                            <div class="option-header">
                                <i class="fas fa-palette"></i>
                                <span>主题风格</span>
                            </div>
                            <div class="option-body">
                                <select id="statsTheme" class="theme-select">
                                    <option value="default">默认主题</option>
                                    <option value="vibrant">活力主题</option>
                                    <option value="minimal">简约主题</option>
                                    <option value="gradient">渐变主题</option>
                                </select>
                                <small>选择统计区域的视觉风格</small>
                            </div>
                        </div>
                        
                        <div class="option-card">
                            <div class="option-header">
                                <i class="fas fa-clock"></i>
                                <span>自动更新</span>
                            </div>
                            <div class="option-body">
                                <select id="autoUpdateInterval" class="interval-select">
                                    <option value="0">手动更新</option>
                                    <option value="5">5分钟</option>
                                    <option value="15">15分钟</option>
                                    <option value="30">30分钟</option>
                                    <option value="60">1小时</option>
                                </select>
                                <small>设置统计数据的自动刷新频率</small>
                            </div>
                        </div>
                        
                        <div class="option-card">
                            <div class="option-header">
                                <i class="fas fa-eye"></i>
                                <span>显示模式</span>
                            </div>
                            <div class="option-body">
                                <div class="radio-group">
                                    <label class="radio-option">
                                        <input type="radio" name="displayMode" value="cards" checked>
                                        <span class="radio-mark"></span>
                                        <span>卡片模式</span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="displayMode" value="compact">
                                        <span class="radio-mark"></span>
                                        <span>紧凑模式</span>
                                    </label>
                                </div>
                                <small>选择统计数据的展示方式</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 预览区域 -->
                <div class="stats-preview-section">
                    <h3 class="config-title">
                        <i class="fas fa-desktop"></i>
                        实时预览
                    </h3>
                    
                    <div class="preview-container">
                        <div class="preview-frame">
                            <div class="preview-stats">
                                <div class="preview-stat-item">
                                    <i class="fas fa-users"></i>
                                    <span class="preview-stat-number" id="previewFollowers">1.5K</span>
                                    <span class="preview-stat-label">关注者</span>
                                </div>
                                <div class="preview-stat-item">
                                    <i class="fas fa-mouse-pointer"></i>
                                    <span class="preview-stat-number" id="previewClicks">856</span>
                                    <span class="preview-stat-label">点击量</span>
                                </div>
                                <div class="preview-stat-item">
                                    <i class="fas fa-link"></i>
                                    <span class="preview-stat-number" id="previewLinks">3</span>
                                    <span class="preview-stat-label">链接</span>
                                </div>
                            </div>
                        </div>
                        <div class="preview-note">
                            <i class="fas fa-info-circle"></i>
                            <span>这里显示您的统计数据在网站上的实际效果</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 链接管理 -->
            <section class="content-section" id="links-section">
                <div class="section-header">
                    <h2>链接管理</h2>
                    <p>轻松管理您的链接，让访客快速找到所需内容</p>
                </div>
                
                <!-- 链接统计概览 -->
                <div class="links-overview">
                    <div class="overview-stat-card">
                        <div class="stat-icon-wrap">
                            <i class="fas fa-link"></i>
                        </div>
                        <div class="stat-content-wrap">
                            <span class="stat-number" id="totalLinksCount">0</span>
                            <span class="stat-label">总链接数</span>
                        </div>
                    </div>
                    <div class="overview-stat-card">
                        <div class="stat-icon-wrap">
                            <i class="fas fa-mouse-pointer"></i>
                        </div>
                        <div class="stat-content-wrap">
                            <span class="stat-number" id="totalClicksSum">0</span>
                            <span class="stat-label">总点击数</span>
                        </div>
                    </div>
                    <div class="overview-stat-card">
                        <div class="stat-icon-wrap">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-content-wrap">
                            <span class="stat-number" id="activeLinksCount">0</span>
                            <span class="stat-label">活跃链接</span>
                        </div>
                    </div>
                    <div class="overview-stat-card">
                        <div class="stat-icon-wrap">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-content-wrap">
                            <span class="stat-number" id="averageClicks">0</span>
                            <span class="stat-label">平均点击</span>
                        </div>
                    </div>
                </div>
                
                <!-- 链接管理工具栏 -->
                <div class="links-toolbar">
                    <div class="toolbar-left">
                        <button class="btn btn-primary" id="addLinkBtn">
                            <i class="fas fa-plus"></i>
                            添加新链接
                        </button>
                    </div>
                    <div class="toolbar-right">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="searchLinksInput" placeholder="搜索链接...">
                        </div>
                        <select id="linksSortSelect" class="sort-select">
                            <option value="custom">自定义排序</option>
                            <option value="name">按名称排序</option>
                            <option value="clicks">按点击量排序</option>
                            <option value="created">按创建时间排序</option>
                        </select>
                        <div class="view-toggle">
                            <button class="view-btn active" data-view="grid" title="网格视图">
                                <i class="fas fa-th"></i>
                            </button>
                            <button class="view-btn" data-view="list" title="列表视图">
                                <i class="fas fa-list"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 链接列表容器 -->
                <div class="links-container">
                    <div class="links-list" id="linksList">
                        <!-- 动态生成链接项 -->
                    </div>
                    
                    <!-- 空状态 -->
                    <div class="empty-links" id="emptyLinks" style="display: none;">
                        <div class="empty-icon">
                            <i class="fas fa-link"></i>
                        </div>
                        <h3>还没有添加链接</h3>
                        <p>点击"添加新链接"按钮开始创建您的第一个链接</p>
                        <button class="btn btn-primary" onclick="document.getElementById('addLinkBtn').click()">
                            <i class="fas fa-plus"></i>
                            立即添加
                        </button>
                    </div>
                </div>
                
                <!-- 快速添加面板 -->
                <div class="quick-add-panel" id="quickAddPanel" style="display: none;">
                    <div class="panel-header">
                        <h3>
                            <i class="fas fa-zap"></i>
                            快速添加链接
                        </h3>
                        <button class="close-panel" id="closeQuickPanel">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="panel-body">
                        <div class="quick-templates">
                            <div class="template-item" data-template="social">
                                <i class="fab fa-instagram"></i>
                                <span>社交媒体</span>
                            </div>
                            <div class="template-item" data-template="website">
                                <i class="fas fa-globe"></i>
                                <span>个人网站</span>
                            </div>
                            <div class="template-item" data-template="shop">
                                <i class="fas fa-shopping-cart"></i>
                                <span>在线商店</span>
                            </div>
                            <div class="template-item" data-template="contact">
                                <i class="fas fa-envelope"></i>
                                <span>联系方式</span>
                            </div>
                            <div class="template-item" data-template="portfolio">
                                <i class="fas fa-briefcase"></i>
                                <span>作品集</span>
                            </div>
                            <div class="template-item" data-template="custom">
                                <i class="fas fa-plus"></i>
                                <span>自定义</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 二维码设置 -->
            <section class="content-section" id="qrcode-section">
                <div class="section-header">
                    <h2>二维码设置</h2>
                    <p>创建个性化二维码，让访客轻松连接您的内容</p>
                </div>
                
                <!-- 二维码快速统计 -->
                <div class="qr-overview">
                    <div class="qr-overview-card">
                        <div class="qr-icon-wrap">
                            <i class="fas fa-qrcode"></i>
                        </div>
                        <div class="qr-content-wrap">
                            <span class="qr-number" id="qrScanCount">127</span>
                            <span class="qr-label">累计扫描</span>
                        </div>
                    </div>
                    <div class="qr-overview-card">
                        <div class="qr-icon-wrap">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <div class="qr-content-wrap">
                            <span class="qr-number" id="qrTodayCount">23</span>
                            <span class="qr-label">今日扫描</span>
                        </div>
                    </div>
                    <div class="qr-overview-card">
                        <div class="qr-icon-wrap">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="qr-content-wrap">
                            <span class="qr-number" id="qrSuccessRate">89%</span>
                            <span class="qr-label">成功率</span>
                        </div>
                    </div>
                    <div class="qr-overview-card">
                        <div class="qr-icon-wrap">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="qr-content-wrap">
                            <span class="qr-number" id="qrActiveTime">15天</span>
                            <span class="qr-label">活跃时长</span>
                        </div>
                    </div>
                </div>
                
                <div class="qr-settings">
                    <!-- 左侧配置区域 -->
                    <div class="qr-config-section">
                        <!-- 基础设置 -->
                        <div class="qr-config-card">
                            <div class="config-card-header">
                                <div class="config-icon">
                                    <i class="fas fa-cog"></i>
                                </div>
                                <div class="config-title">
                                    <h3>基础设置</h3>
                                    <p>配置二维码的基本信息</p>
                                </div>
                            </div>
                            <div class="config-card-body">
                                <div class="form-group">
                                    <label for="qrContent">二维码内容</label>
                                    <div class="content-input-wrapper">
                                        <textarea id="qrContent" rows="3" placeholder="输入网址、微信号或其他内容"></textarea>
                                        <div class="content-type-indicator" id="contentTypeIndicator">
                                            <i class="fas fa-link"></i>
                                            <span>网址链接</span>
                                        </div>
                                    </div>
                                    <div class="content-examples">
                                        <span class="example-tag" data-example="https://example.com">
                                            <i class="fas fa-globe"></i>
                                            网站链接
                                        </span>
                                        <span class="example-tag" data-example="微信号：your_wechat_id">
                                            <i class="fab fa-weixin"></i>
                                            微信号
                                        </span>
                                        <span class="example-tag" data-example="tel:+8612345678901">
                                            <i class="fas fa-phone"></i>
                                            手机号
                                        </span>
                                        <span class="example-tag" data-example="mailto:contact@example.com">
                                            <i class="fas fa-envelope"></i>
                                            邮箱
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="qrDescription">二维码说明</label>
                                    <input type="text" id="qrDescription" placeholder="扫描二维码关注公众号" value="扫描二维码关注公众号">
                                </div>
                                
                                <div class="form-group">
                                    <label for="qrSubDescription">副标题描述</label>
                                    <input type="text" id="qrSubDescription" placeholder="公众号：第七仓库 你想要的我都有" value="公众号：第七仓库 你想要的我都有">
                                </div>
                            </div>
                        </div>
                        
                        <!-- 样式设置 -->
                        <div class="qr-config-card">
                            <div class="config-card-header">
                                <div class="config-icon">
                                    <i class="fas fa-palette"></i>
                                </div>
                                <div class="config-title">
                                    <h3>样式设置</h3>
                                    <p>自定义二维码的外观</p>
                                </div>
                            </div>
                            <div class="config-card-body">
                                <div class="style-grid">
                                    <div class="form-group">
                                        <label for="qrSize">尺寸大小</label>
                                        <div class="range-input-wrapper">
                                            <input type="range" id="qrSize" min="100" max="300" value="150">
                                            <span class="range-value" id="qrSizeValue">150px</span>
                                        </div>
                                        <div class="size-presets">
                                            <button class="size-preset" data-size="120">小</button>
                                            <button class="size-preset active" data-size="150">中</button>
                                            <button class="size-preset" data-size="200">大</button>
                                            <button class="size-preset" data-size="250">特大</button>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="qrColor">前景色</label>
                                        <div class="color-input-wrapper">
                                            <input type="color" id="qrColor" value="#2563eb">
                                            <div class="color-presets">
                                                <span class="color-preset" data-color="#2563eb" style="background: #2563eb;"></span>
                                                <span class="color-preset" data-color="#dc2626" style="background: #dc2626;"></span>
                                                <span class="color-preset" data-color="#059669" style="background: #059669;"></span>
                                                <span class="color-preset" data-color="#7c2d12" style="background: #7c2d12;"></span>
                                                <span class="color-preset" data-color="#7c3aed" style="background: #7c3aed;"></span>
                                                <span class="color-preset" data-color="#000000" style="background: #000000;"></span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="qrBackground">背景色</label>
                                        <div class="color-input-wrapper">
                                            <input type="color" id="qrBackground" value="#ffffff">
                                            <div class="color-presets">
                                                <span class="color-preset" data-color="#ffffff" style="background: #ffffff; border: 1px solid #e5e7eb;"></span>
                                                <span class="color-preset" data-color="#f8fafc" style="background: #f8fafc;"></span>
                                                <span class="color-preset" data-color="#f1f5f9" style="background: #f1f5f9;"></span>
                                                <span class="color-preset" data-color="#fef3c7" style="background: #fef3c7;"></span>
                                                <span class="color-preset" data-color="#ecfdf5" style="background: #ecfdf5;"></span>
                                                <span class="color-preset" data-color="#ede9fe" style="background: #ede9fe;"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 高级设置 -->
                        <div class="qr-config-card">
                            <div class="config-card-header">
                                <div class="config-icon">
                                    <i class="fas fa-magic"></i>
                                </div>
                                <div class="config-title">
                                    <h3>高级选项</h3>
                                    <p>更多定制化功能</p>
                                </div>
                            </div>
                            <div class="config-card-body">
                                <div class="advanced-options">
                                    <div class="option-item">
                                        <div class="option-info">
                                            <label>容错级别</label>
                                            <small>更高级别可在损坏时仍能扫描</small>
                                        </div>
                                        <select id="qrErrorLevel" class="advanced-select">
                                            <option value="L">低 (7%)</option>
                                            <option value="M" selected>中 (15%)</option>
                                            <option value="Q">高 (25%)</option>
                                            <option value="H">最高 (30%)</option>
                                        </select>
                                    </div>
                                    
                                    <div class="option-item">
                                        <div class="option-info">
                                            <label>显示logo</label>
                                            <small>在二维码中心添加小图标</small>
                                        </div>
                                        <label class="advanced-switch">
                                            <input type="checkbox" id="qrLogo">
                                            <span class="advanced-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="option-item">
                                        <div class="option-info">
                                            <label>圆角样式</label>
                                            <small>使二维码边角更加圆润</small>
                                        </div>
                                        <label class="advanced-switch">
                                            <input type="checkbox" id="qrRoundCorners">
                                            <span class="advanced-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="option-item">
                                        <div class="option-info">
                                            <label>边框样式</label>
                                            <small>为二维码添加装饰性边框</small>
                                        </div>
                                        <select id="qrBorderStyle" class="advanced-select">
                                            <option value="none">无边框</option>
                                            <option value="solid">实线边框</option>
                                            <option value="dashed">虚线边框</option>
                                            <option value="gradient">渐变边框</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 右侧预览区域 -->
                    <div class="qr-preview-section">
                        <div class="qr-preview-card">
                            <div class="preview-header">
                                <h3>
                                    <i class="fas fa-eye"></i>
                                    实时预览
                                </h3>
                                                    <div class="preview-actions">
                        <button class="btn-preview" id="downloadQRBtn" title="下载二维码">
                            <i class="fas fa-download"></i>
                        </button>
                        <button class="btn-preview" id="shareQRBtn" title="分享二维码">
                            <i class="fas fa-share-alt"></i>
                        </button>
                        <button class="btn-preview" id="refreshQRBtn" title="刷新预览">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <button class="btn-preview" onclick="generateBatchQRCodes()" title="批量生成">
                            <i class="fas fa-layer-group"></i>
                        </button>
                        <button class="btn-preview" onclick="resetQRSettings()" title="重置设置">
                            <i class="fas fa-undo"></i>
                        </button>
                        <button class="btn-preview" onclick="copyQRContent()" title="复制内容">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                            </div>
                            
                            <div class="qr-preview-container">
                                <div class="qr-canvas-wrapper">
                                    <canvas id="qrPreviewCanvas"></canvas>
                                    <div class="qr-overlay">
                                        <div class="scan-animation">
                                            <div class="scan-line"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="qr-info">
                                    <h4 id="qrPreviewText">扫描二维码关注公众号</h4>
                                    <p id="qrPreviewDesc">公众号：第七仓库 你想要的我都有</p>
                                    
                                    <div class="qr-details">
                                        <div class="detail-item">
                                            <i class="fas fa-expand-arrows-alt"></i>
                                            <span id="qrDetailSize">150×150px</span>
                                        </div>
                                        <div class="detail-item">
                                            <i class="fas fa-shield-alt"></i>
                                            <span id="qrDetailLevel">中等容错</span>
                                        </div>
                                        <div class="detail-item">
                                            <i class="fas fa-file-alt"></i>
                                            <span id="qrDetailFormat">PNG格式</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="preview-footer">
                                <div class="qr-test-section">
                                    <h5>
                                        <i class="fas fa-mobile-alt"></i>
                                        扫描测试
                                    </h5>
                                    <p>使用手机扫一扫功能测试二维码</p>
                                    <div class="test-devices">
                                        <span class="device-icon" title="微信扫一扫">
                                            <i class="fab fa-weixin"></i>
                                        </span>
                                        <span class="device-icon" title="支付宝扫一扫">
                                            <i class="fab fa-alipay"></i>
                                        </span>
                                        <span class="device-icon" title="相机扫描">
                                            <i class="fas fa-camera"></i>
                                        </span>
                                        <span class="device-icon" title="浏览器扫描">
                                            <i class="fas fa-globe"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 模板选择 -->
                        <div class="qr-templates-card">
                            <div class="templates-header">
                                <h3>
                                    <i class="fas fa-th-large"></i>
                                    快速模板
                                </h3>
                            </div>
                            <div class="templates-grid">
                                <div class="template-item" data-template="wechat">
                                    <div class="template-icon">
                                        <i class="fab fa-weixin"></i>
                                    </div>
                                    <span>微信二维码</span>
                                </div>
                                <div class="template-item" data-template="website">
                                    <div class="template-icon">
                                        <i class="fas fa-globe"></i>
                                    </div>
                                    <span>网站链接</span>
                                </div>
                                <div class="template-item" data-template="contact">
                                    <div class="template-icon">
                                        <i class="fas fa-address-card"></i>
                                    </div>
                                    <span>联系信息</span>
                                </div>
                                <div class="template-item" data-template="wifi">
                                    <div class="template-icon">
                                        <i class="fas fa-wifi"></i>
                                    </div>
                                    <span>WiFi密码</span>
                                </div>
                                <div class="template-item" data-template="phone">
                                    <div class="template-icon">
                                        <i class="fas fa-phone"></i>
                                    </div>
                                    <span>电话号码</span>
                                </div>
                                <div class="template-item" data-template="email">
                                    <div class="template-icon">
                                        <i class="fas fa-envelope"></i>
                                    </div>
                                    <span>邮箱地址</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 运行监控 -->
            <section class="content-section" id="analytics-section">
                <div class="section-header">
                    <h2>运行监控</h2>
                    <p>查看网站访问统计和链接点击数据</p>
                </div>

                <!-- 日期选择器 -->
                <div class="analytics-controls">
                    <div class="date-selector">
                        <label for="analyticsDate">选择日期：</label>
                        <input type="date" id="analyticsDate" value="">
                        <div class="quick-dates">
                            <button class="btn btn-secondary" id="todayBtn">今天</button>
                            <button class="btn btn-secondary" id="yesterdayBtn">昨天</button>
                            <button class="btn btn-secondary" id="last7daysBtn">最近7天</button>
                            <button class="btn btn-secondary" id="last30daysBtn">最近30天</button>
                        </div>
                    </div>
                    <div class="refresh-controls">
                        <button class="btn btn-primary" id="refreshDataBtn">
                            <i class="fas fa-sync-alt"></i>
                            刷新数据
                        </button>
                        <button class="btn btn-outline" id="exportAnalyticsBtn">
                            <i class="fas fa-download"></i>
                            导出报告
                        </button>
                    </div>
                </div>

                <!-- 总览统计 -->
                <div class="analytics-overview">
                    <div class="overview-card">
                        <div class="card-icon">
                            <i class="fas fa-mouse-pointer"></i>
                        </div>
                        <div class="card-content">
                            <div class="card-value" id="totalClicksValue">0</div>
                            <div class="card-label">总点击量</div>
                            <div class="card-change" id="totalClicksChange">+0%</div>
                        </div>
                    </div>
                    
                    <div class="overview-card">
                        <div class="card-icon">
                            <i class="fas fa-link"></i>
                        </div>
                        <div class="card-content">
                            <div class="card-value" id="activeLinksValue">0</div>
                            <div class="card-label">活跃链接</div>
                            <div class="card-change" id="activeLinksChange">+0%</div>
                        </div>
                    </div>
                    
                    <div class="overview-card">
                        <div class="card-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="card-content">
                            <div class="card-value" id="avgClicksValue">0</div>
                            <div class="card-label">平均点击</div>
                            <div class="card-change" id="avgClicksChange">+0%</div>
                        </div>
                    </div>
                    
                    <div class="overview-card">
                        <div class="card-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="card-content">
                            <div class="card-value" id="peakHourValue">--</div>
                            <div class="card-label">峰值时间</div>
                            <div class="card-change" id="peakHourChange">--</div>
                        </div>
                    </div>
                </div>

                <!-- 图表区域 -->
                <div class="analytics-charts">
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3><i class="fas fa-chart-bar" style="margin-right: 8px;"></i>24小时点击分布</h3>
                        </div>
                        <div class="chart-content">
                            <div class="simple-chart" id="trendChart">
                                <!-- 简单图表实现 -->
                            </div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>链接点击分布</h3>
                        </div>
                        <div class="chart-content">
                            <div class="simple-chart" id="distributionChart">
                                <!-- 简单图表实现 -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 详细数据表 -->
                <div class="analytics-table">
                    <div class="table-header">
                        <h3>链接详细统计</h3>
                        <div class="table-controls">
                            <input type="text" id="searchLinks" placeholder="搜索链接..." class="search-input">
                            <select id="sortBy" class="sort-select">
                                <option value="clicks">按点击量排序</option>
                                <option value="name">按名称排序</option>
                                <option value="url">按链接排序</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="linksTable">
                            <thead>
                                <tr>
                                    <th>排名</th>
                                    <th>链接名称</th>
                                    <th>链接地址</th>
                                    <th>点击次数</th>
                                    <th>占比</th>
                                    <th>最后点击</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="linksTableBody">
                                <!-- 动态生成数据 -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 空状态 -->
                <div class="empty-analytics" id="emptyAnalytics" style="display: none;">
                    <div class="empty-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h3>暂无统计数据</h3>
                    <p>当用户开始点击链接后，这里将显示详细的统计信息</p>
                    <button class="btn btn-primary" onclick="generateSampleData()">
                        <i class="fas fa-plus"></i>
                        生成示例数据
                    </button>
                </div>
            </section>

            <!-- 外观设置 -->
            <section class="content-section" id="appearance-section">
                <div class="section-header">
                    <h2>外观设置</h2>
                    <p>自定义网站的视觉效果</p>
                </div>
                
                <div class="appearance-settings">
                    <!-- 背景类型选择 -->
                    <div class="form-group">
                        <label>背景类型</label>
                        <p class="form-description">选择网站的背景显示方式</p>
                        <div class="background-type-options">
                            <label class="background-type-option">
                                <input type="radio" name="backgroundType" value="image" checked>
                                <div class="type-preview">
                                    <i class="fas fa-image"></i>
                                    <span>背景图片</span>
                                </div>
                                <small class="type-description">使用自定义图片作为网站背景</small>
                            </label>
                            <label class="background-type-option">
                                <input type="radio" name="backgroundType" value="gradient">
                                <div class="type-preview">
                                    <i class="fas fa-palette"></i>
                                    <span>渐变背景</span>
                                </div>
                                <small class="type-description">使用颜色渐变效果作为背景</small>
                            </label>
                        </div>
                    </div>

                    <!-- 背景图片设置 -->
                    <div class="form-group" id="imageBackgroundGroup">
                        <label>背景图片</label>
                        <div class="background-upload">
                            <div class="background-preview">
                                <img id="backgroundPreview" src="bj.jpg" alt="背景预览">
                                <div class="background-overlay">
                                    <i class="fas fa-image"></i>
                                    <span>点击更换背景</span>
                                </div>
                            </div>
                            <input type="file" id="backgroundInput" accept="image/*" style="display: none;">
                            <button type="button" class="btn btn-secondary" onclick="document.getElementById('backgroundInput').click()">
                                <i class="fas fa-upload"></i>
                                更换背景图片
                            </button>
                        </div>
                    </div>

                    <!-- 渐变背景设置 -->
                    <div class="form-group" id="gradientBackgroundGroup" style="display: none;">
                        <label>渐变背景</label>
                        <div class="gradient-options">
                            <!-- 预设渐变 -->
                            <div class="gradient-presets">
                                <h4>精选渐变</h4>
                                <div class="gradient-grid">
                                    <div class="gradient-item" data-gradient="linear-gradient(135deg, #667eea 0%, #764ba2 100%)" title="紫蓝渐变">
                                        <div class="gradient-preview" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
                                        <span>紫蓝渐变</span>
                                    </div>
                                    <div class="gradient-item" data-gradient="linear-gradient(135deg, #f093fb 0%, #f5576c 100%)" title="粉红渐变">
                                        <div class="gradient-preview" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);"></div>
                                        <span>粉红渐变</span>
                                    </div>
                                    <div class="gradient-item" data-gradient="linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)" title="蓝青渐变">
                                        <div class="gradient-preview" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);"></div>
                                        <span>蓝青渐变</span>
                                    </div>
                                    <div class="gradient-item" data-gradient="linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)" title="绿青渐变">
                                        <div class="gradient-preview" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);"></div>
                                        <span>绿青渐变</span>
                                    </div>
                                    <div class="gradient-item" data-gradient="linear-gradient(135deg, #fa709a 0%, #fee140 100%)" title="粉黄渐变">
                                        <div class="gradient-preview" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);"></div>
                                        <span>粉黄渐变</span>
                                    </div>
                                    <div class="gradient-item" data-gradient="linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)" title="薄荷粉渐变">
                                        <div class="gradient-preview" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);"></div>
                                        <span>薄荷粉渐变</span>
                                    </div>
                                    <div class="gradient-item" data-gradient="linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)" title="珊瑚粉渐变">
                                        <div class="gradient-preview" style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);"></div>
                                        <span>珊瑚粉渐变</span>
                                    </div>
                                    <div class="gradient-item" data-gradient="linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)" title="紫粉渐变">
                                        <div class="gradient-preview" style="background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);"></div>
                                        <span>紫粉渐变</span>
                                    </div>
                                    <div class="gradient-item" data-gradient="linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)" title="橙桃渐变">
                                        <div class="gradient-preview" style="background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);"></div>
                                        <span>橙桃渐变</span>
                                    </div>
                                    <div class="gradient-item" data-gradient="linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%)" title="天空蓝渐变">
                                        <div class="gradient-preview" style="background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);"></div>
                                        <span>天空蓝渐变</span>
                                    </div>
                                    <div class="gradient-item" data-gradient="linear-gradient(135deg, #fdbb2d 0%, #22c1c3 100%)" title="金青渐变">
                                        <div class="gradient-preview" style="background: linear-gradient(135deg, #fdbb2d 0%, #22c1c3 100%);"></div>
                                        <span>金青渐变</span>
                                    </div>
                                    <div class="gradient-item" data-gradient="linear-gradient(135deg, #e0c3fc 0%, #9bb5ff 100%)" title="薰衣草渐变">
                                        <div class="gradient-preview" style="background: linear-gradient(135deg, #e0c3fc 0%, #9bb5ff 100%);"></div>
                                        <span>薰衣草渐变</span>
                                    </div>
                                </div>
                            </div>

                            <!-- 自定义渐变 -->
                            <div class="custom-gradient">
                                <h4>自定义渐变</h4>
                                <div class="gradient-controls">
                                    <div class="gradient-direction">
                                        <label>渐变方向：</label>
                                        <select id="gradientDirection">
                                            <option value="135deg">左上到右下</option>
                                            <option value="45deg">左下到右上</option>
                                            <option value="90deg">从上到下</option>
                                            <option value="0deg">从左到右</option>
                                            <option value="180deg">从下到上</option>
                                            <option value="270deg">从右到左</option>
                                        </select>
                                    </div>
                                    <div class="gradient-colors">
                                        <div class="color-input-group">
                                            <label>起始颜色：</label>
                                            <input type="color" id="gradientStartColor" value="#667eea">
                                        </div>
                                        <div class="color-input-group">
                                            <label>结束颜色：</label>
                                            <input type="color" id="gradientEndColor" value="#764ba2">
                                        </div>
                                    </div>
                                    <div class="gradient-preview-custom">
                                        <div id="customGradientPreview" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
                                        <button class="btn btn-secondary btn-sm" id="applyCustomGradient">
                                            <i class="fas fa-check"></i>
                                            应用渐变
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="backgroundOpacity">背景透明度</label>
                        <input type="range" id="backgroundOpacity" min="0.05" max="0.8" step="0.05" value="0.15">
                        <span id="backgroundOpacityValue">15%</span>
                        <small id="backgroundOpacityDescription">调整背景的透明度效果</small>
                    </div>
                    
                    <div class="form-group">
                        <label>默认主题</label>
                        <div class="theme-options">
                            <label class="theme-option">
                                <input type="radio" name="defaultTheme" value="light" checked>
                                <div class="theme-preview theme-light">
                                    <i class="fas fa-sun"></i>
                                    <span>浅色主题</span>
                                </div>
                            </label>
                            <label class="theme-option">
                                <input type="radio" name="defaultTheme" value="dark">
                                <div class="theme-preview theme-dark">
                                    <i class="fas fa-moon"></i>
                                    <span>深色主题</span>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 数据管理 -->
            <section class="content-section" id="export-section">
                <div class="section-header">
                    <h2>数据管理</h2>
                    <p>导入导出设置数据，备份和恢复配置</p>
                </div>
                
                <!-- 存储状态信息 -->
                <div class="storage-info">
                    <div class="info-card">
                        <div class="info-icon">
                            <i class="fas fa-database"></i>
                        </div>
                        <div class="info-content">
                            <h4>存储空间</h4>
                            <div class="storage-details">
                                <div class="storage-item">
                                    <span class="storage-label">已使用:</span>
                                    <span class="storage-value" id="usedStorage">0 KB</span>
                                </div>
                                <div class="storage-item">
                                    <span class="storage-label">可用:</span>
                                    <span class="storage-value" id="availableStorage">~5 MB</span>
                                </div>
                                <div class="storage-item">
                                    <span class="storage-label">配置项:</span>
                                    <span class="storage-value" id="configCount">0</span>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-secondary btn-sm" id="refreshStorageBtn">
                            <i class="fas fa-sync-alt"></i>
                            刷新
                        </button>
                    </div>
                </div>
                
                <div class="data-management">
                    <!-- 配置导出 -->
                    <div class="management-section">
                        <h3>配置导出</h3>
                        <div class="export-options">
                            <div class="export-card">
                                <div class="export-header">
                                    <i class="fas fa-download"></i>
                                    <span>完整配置</span>
                                </div>
                                <p>导出所有设置，包括个人信息、链接、样式等</p>
                                <div class="export-actions">
                                    <button class="btn btn-primary" id="exportAllBtn">
                                        <i class="fas fa-download"></i>
                                        导出全部
                                    </button>
                                    <button class="btn btn-outline" id="previewConfigBtn">
                                        <i class="fas fa-eye"></i>
                                        预览
                                    </button>
                                </div>
                            </div>
                            
                            <div class="export-card">
                                <div class="export-header">
                                    <i class="fas fa-file-alt"></i>
                                    <span>选择性导出</span>
                                </div>
                                <p>仅导出选中的配置项</p>
                                <div class="export-checkboxes">
                                    <label class="checkbox-item">
                                        <input type="checkbox" id="exportProfile" checked>
                                        <span>个人信息</span>
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" id="exportStats" checked>
                                        <span>统计数据</span>
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" id="exportLinks" checked>
                                        <span>链接设置</span>
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" id="exportQRCode" checked>
                                        <span>二维码</span>
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" id="exportAppearance" checked>
                                        <span>外观设置</span>
                                    </label>
                                </div>
                                <button class="btn btn-secondary" id="exportSelectedBtn">
                                    <i class="fas fa-download"></i>
                                    导出选中项
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 配置导入 -->
                    <div class="management-section">
                        <h3>配置导入</h3>
                        <div class="import-area">
                            <div class="import-card">
                                <div class="import-header">
                                    <i class="fas fa-upload"></i>
                                    <span>从文件导入</span>
                                </div>
                                <div class="file-drop-zone" id="fileDropZone">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>拖拽JSON文件到此处或点击选择文件</p>
                                    <button class="btn btn-outline" id="selectFileBtn">选择文件</button>
                                    <input type="file" id="importDataInput" accept=".json" style="display: none;">
                                </div>
                                <div class="import-info">
                                    <small>支持完整配置文件和部分配置文件</small>
                                </div>
                            </div>
                            
                            <div class="import-card">
                                <div class="import-header">
                                    <i class="fas fa-code"></i>
                                    <span>从文本导入</span>
                                </div>
                                <textarea id="importTextArea" placeholder="粘贴JSON配置文本..." rows="6"></textarea>
                                <div class="import-actions">
                                    <button class="btn btn-secondary" id="validateJsonBtn">
                                        <i class="fas fa-check"></i>
                                        验证格式
                                    </button>
                                    <button class="btn btn-primary" id="importFromTextBtn">
                                        <i class="fas fa-upload"></i>
                                        导入配置
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 备份管理 -->
                    <div class="management-section">
                        <h3>自动备份</h3>
                        <div class="backup-controls">
                            <div class="backup-settings">
                                <label class="checkbox-item">
                                    <input type="checkbox" id="enableAutoBackup">
                                    <span>启用自动备份</span>
                                </label>
                                <div class="backup-frequency">
                                    <label for="backupFrequency">备份频率:</label>
                                    <select id="backupFrequency">
                                        <option value="daily">每天</option>
                                        <option value="weekly" selected>每周</option>
                                        <option value="monthly">每月</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="backup-actions">
                                <button class="btn btn-primary" id="createBackupBtn">
                                    <i class="fas fa-save"></i>
                                    创建备份
                                </button>
                                <button class="btn btn-outline" id="viewBackupsBtn">
                                    <i class="fas fa-history"></i>
                                    查看备份
                                </button>
                            </div>
                        </div>
                        
                        <div class="backup-list" id="backupList" style="display: none;">
                            <!-- 动态生成备份列表 -->
                        </div>
                    </div>
                    
                    <!-- 危险操作 -->
                    <div class="management-section danger-section">
                        <h3>危险操作</h3>
                        <div class="danger-actions">
                            <div class="danger-card">
                                <div class="danger-header">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <span>重置设置</span>
                                </div>
                                <p>将所有设置恢复为默认值，此操作不可撤销</p>
                                <button class="btn btn-danger" id="resetDataBtn">
                                    <i class="fas fa-undo"></i>
                                    重置所有数据
                                </button>
                            </div>
                            
                            <div class="danger-card">
                                <div class="danger-header">
                                    <i class="fas fa-trash"></i>
                                    <span>清空数据</span>
                                </div>
                                <p>删除所有配置数据和备份，完全清空本地存储</p>
                                <button class="btn btn-danger" id="clearAllDataBtn">
                                    <i class="fas fa-trash-alt"></i>
                                    清空所有数据
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 安全设置 -->
            <section class="content-section" id="security-section">
                <div class="section-header">
                    <h2>安全设置</h2>
                    <p>管理登录密码和安全选项</p>
                </div>
                
                <div class="security-container">
                    <!-- 密码修改 -->
                    <div class="security-section">
                        <h3>密码管理</h3>
                        <div class="password-form">
                            <div class="form-group">
                                <label for="currentPassword">当前密码</label>
                                <div class="password-input">
                                    <input type="password" id="currentPassword" placeholder="请输入当前密码" required>
                                    <button type="button" class="password-toggle" data-target="currentPassword">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="newPassword">新密码</label>
                                <div class="password-input">
                                    <input type="password" id="newPassword" placeholder="请输入新密码" required>
                                    <button type="button" class="password-toggle" data-target="newPassword">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="password-strength" id="passwordStrength">
                                    <div class="strength-bar">
                                        <div class="strength-fill"></div>
                                    </div>
                                    <span class="strength-text">密码强度</span>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="confirmPassword">确认新密码</label>
                                <div class="password-input">
                                    <input type="password" id="confirmPassword" placeholder="请再次输入新密码" required>
                                    <button type="button" class="password-toggle" data-target="confirmPassword">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="password-match" id="passwordMatch"></div>
                            </div>
                            
                            <div class="password-requirements">
                                <h4>密码要求：</h4>
                                <ul class="requirements-list">
                                    <li id="lengthReq" class="requirement">
                                        <i class="fas fa-times"></i>
                                        <span>至少8个字符</span>
                                    </li>
                                    <li id="uppercaseReq" class="requirement">
                                        <i class="fas fa-times"></i>
                                        <span>包含大写字母</span>
                                    </li>
                                    <li id="lowercaseReq" class="requirement">
                                        <i class="fas fa-times"></i>
                                        <span>包含小写字母</span>
                                    </li>
                                    <li id="numberReq" class="requirement">
                                        <i class="fas fa-times"></i>
                                        <span>包含数字</span>
                                    </li>
                                    <li id="specialReq" class="requirement">
                                        <i class="fas fa-times"></i>
                                        <span>包含特殊字符 (!@#$%^&*)</span>
                                    </li>
                                </ul>
                            </div>
                            
                            <button type="button" class="btn btn-primary" id="changePasswordBtn">
                                <i class="fas fa-key"></i>
                                修改密码
                            </button>
                        </div>
                    </div>
                    
                    <!-- 登录安全 -->
                    <div class="security-section">
                        <h3>登录安全</h3>
                        <div class="security-options">
                            <div class="security-option">
                                <div class="option-info">
                                    <h4>会话超时</h4>
                                    <p>设置登录会话的有效时间</p>
                                </div>
                                <div class="option-control">
                                    <select id="sessionTimeout">
                                        <option value="30">30分钟</option>
                                        <option value="60" selected>1小时</option>
                                        <option value="120">2小时</option>
                                        <option value="240">4小时</option>
                                        <option value="480">8小时</option>
                                        <option value="1440">24小时</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="security-option">
                                <div class="option-info">
                                    <h4>记住登录状态</h4>
                                    <p>允许浏览器记住登录状态</p>
                                </div>
                                <div class="option-control">
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="rememberLogin" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="security-option">
                                <div class="option-info">
                                    <h4>登录失败锁定</h4>
                                    <p>连续输错密码后临时锁定账户</p>
                                </div>
                                <div class="option-control">
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="failureLock" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="security-option">
                                <div class="option-info">
                                    <h4>最大失败次数</h4>
                                    <p>触发锁定的最大失败次数</p>
                                </div>
                                <div class="option-control">
                                    <select id="maxFailures">
                                        <option value="3" selected>3次</option>
                                        <option value="5">5次</option>
                                        <option value="10">10次</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="security-option">
                                <div class="option-info">
                                    <h4>锁定时间</h4>
                                    <p>账户被锁定的时间长度</p>
                                </div>
                                <div class="option-control">
                                    <select id="lockDuration">
                                        <option value="5">5分钟</option>
                                        <option value="15" selected>15分钟</option>
                                        <option value="30">30分钟</option>
                                        <option value="60">1小时</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 登录日志 -->
                    <div class="security-section">
                        <h3>登录日志</h3>
                        <div class="login-logs">
                            <div class="logs-header">
                                <div class="logs-controls">
                                    <button class="btn btn-outline" id="refreshLogsBtn">
                                        <i class="fas fa-sync-alt"></i>
                                        刷新
                                    </button>
                                    <button class="btn btn-outline" id="clearLogsBtn">
                                        <i class="fas fa-trash"></i>
                                        清空日志
                                    </button>
                                    <button class="btn btn-outline" id="exportLogsBtn">
                                        <i class="fas fa-download"></i>
                                        导出日志
                                    </button>
                                </div>
                            </div>
                            
                            <div class="logs-container" id="loginLogsContainer">
                                <div class="logs-table">
                                    <div class="table-header">
                                        <div class="table-cell">时间</div>
                                        <div class="table-cell">IP地址</div>
                                        <div class="table-cell">状态</div>
                                        <div class="table-cell">浏览器</div>
                                    </div>
                                    <div class="table-body" id="logsTableBody">
                                        <!-- 动态生成登录日志 -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 安全检测 -->
                    <div class="security-section">
                        <h3>安全检测</h3>
                        <div class="security-check">
                            <div class="check-item">
                                <div class="check-icon status-good">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <div class="check-info">
                                    <h4>密码强度</h4>
                                    <p id="passwordStatusText">当前密码强度良好</p>
                                </div>
                                <div class="check-status" id="passwordStatus">良好</div>
                            </div>
                            
                            <div class="check-item">
                                <div class="check-icon status-good">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="check-info">
                                    <h4>最后登录</h4>
                                    <p id="lastLoginText">检测最后登录时间和IP</p>
                                </div>
                                <div class="check-status" id="lastLoginStatus">正常</div>
                            </div>
                            
                            <div class="check-item">
                                <div class="check-icon status-warning">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="check-info">
                                    <h4>异常登录</h4>
                                    <p id="suspiciousLoginText">检测是否有异常登录尝试</p>
                                </div>
                                <div class="check-status" id="suspiciousLoginStatus">无异常</div>
                            </div>
                            
                            <div class="check-item">
                                <div class="check-icon status-good">
                                    <i class="fas fa-user-shield"></i>
                                </div>
                                <div class="check-info">
                                    <h4>会话安全</h4>
                                    <p id="sessionSecurityText">检测当前会话安全状态</p>
                                </div>
                                <div class="check-status" id="sessionSecurityStatus">安全</div>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" id="runSecurityCheckBtn">
                            <i class="fas fa-search"></i>
                            运行安全检测
                        </button>
                    </div>
                    
                    <!-- 紧急操作 -->
                    <div class="security-section danger-section">
                        <h3>紧急操作</h3>
                        <div class="emergency-actions">
                            <div class="emergency-card">
                                <div class="emergency-header">
                                    <i class="fas fa-sign-out-alt"></i>
                                    <span>强制退出所有设备</span>
                                </div>
                                <p>立即结束所有设备上的登录会话</p>
                                <button class="btn btn-warning" id="logoutAllDevicesBtn">
                                    <i class="fas fa-power-off"></i>
                                    强制退出
                                </button>
                            </div>
                            
                            <div class="emergency-card">
                                <div class="emergency-header">
                                    <i class="fas fa-key"></i>
                                    <span>重置安全设置</span>
                                </div>
                                <p>将所有安全设置恢复为默认值</p>
                                <button class="btn btn-danger" id="resetSecurityBtn">
                                    <i class="fas fa-undo"></i>
                                    重置设置
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- 链接编辑模态框 -->
    <div class="modal" id="linkModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="linkModalTitle">添加链接</h3>
                <button class="close-btn" id="closeLinkModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="linkForm">
                    <div class="form-group">
                        <label for="linkTitle">链接标题</label>
                        <input type="text" id="linkTitle" placeholder="请输入链接标题" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="linkUrl">链接地址</label>
                        <input type="url" id="linkUrl" placeholder="https://example.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="linkIcon">图标设置</label>
                        <div class="icon-options">
                            <label class="icon-option">
                                <input type="radio" name="iconType" value="fa" checked>
                                <span>FontAwesome</span>
                            </label>
                            <label class="icon-option">
                                <input type="radio" name="iconType" value="emoji">
                                <span>Emoji</span>
                            </label>
                        </div>
                        <input type="text" id="linkIcon" placeholder="fas fa-link 或 🔗" required>
                        <small>FontAwesome: fas fa-link, Emoji: 🔗🍉🐧</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="linkStyle">链接样式</label>
                        <select id="linkStyle">
                            <optgroup label="经典渐变">
                                <option value="gradient-1">蓝紫渐变</option>
                                <option value="gradient-2">橙红渐变</option>
                                <option value="gradient-3">绿青渐变</option>
                            </optgroup>
                            <optgroup label="彩色系列">
                                <option value="gradient-4">粉色梦幻</option>
                                <option value="gradient-5">清新薄荷</option>
                                <option value="gradient-6">温暖橙色</option>
                                <option value="gradient-7">紫色浪漫</option>
                                <option value="gradient-8">柔和粉红</option>
                                <option value="gradient-9">热情红色</option>
                                <option value="gradient-10">清爽绿色</option>
                                <option value="gradient-11">活力黄粉</option>
                                <option value="gradient-12">炫彩紫红</option>
                            </optgroup>
                            <optgroup label="深色主题">
                                <option value="gradient-dark-1">深蓝灰色</option>
                                <option value="gradient-dark-2">经典黑色</option>
                                <option value="gradient-dark-3">炫酷黑灰</option>
                            </optgroup>
                            <optgroup label="玻璃质感">
                                <option value="gradient-glass-1">透明玻璃</option>
                                <option value="gradient-glass-2">磨砂玻璃</option>
                                <option value="gradient-glass-3">渐变玻璃</option>
                            </optgroup>
                        </select>
                        <small>选择适合您网站风格的链接样式</small>
                        
                        <!-- 样式预览 -->
                        <div class="style-preview" id="stylePreview">
                            <div class="preview-label">样式预览：</div>
                            <div class="preview-link gradient-1" id="previewLink">
                                <i class="fas fa-star"></i>
                                <span>示例链接</span>
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancelLinkBtn">取消</button>
                        <button type="submit" class="btn btn-primary">保存链接</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 消息提示 -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- 脚本 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="admin.js"></script>
    
    <!-- 页面显示脚本 -->
    <script>
        // 确保所有脚本加载完成后显示页面
        window.addEventListener('load', function() {
            const body = document.getElementById('adminBody');
            if (body) {
                body.style.display = 'block';
                console.log('📱 页面已显示');
                
                // 确保二维码正确初始化
                setTimeout(() => {
                    if (window.generateQRPreview) {
                        console.log('🔄 页面显示后重新初始化二维码');
                        window.generateQRPreview();
                    }
                }, 1000);
            }
        });
    </script>
</body>
</html> 